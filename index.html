<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🍗 雞排結帳系統</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .content {
            padding: 30px;
        }
        .status {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .demo-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #495057;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 16px;
        }
        .button-group {
            text-align: center;
            margin: 20px 0;
        }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 10px 5px;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }
        .btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #1e7e34;
        }
        .btn-primary {
            background: #007bff;
        }
        .btn-primary:hover {
            background: #0056b3;
        }
        .btn-info {
            background: #17a2b8;
        }
        .btn-info:hover {
            background: #138496;
        }
        .result-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }
        .result-data {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
        }
        .report-table th,
        .report-table td {
            padding: 12px;
            text-align: left;
            border: 1px solid #dee2e6;
        }
        .report-table th {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            font-weight: bold;
        }
        .report-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .report-table tr:hover {
            background-color: #e9ecef;
        }
        .summary-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        .summary-box h4 {
            color: #856404;
            margin-top: 0;
        }
        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #ffeaa7;
        }
        .summary-item:last-child {
            border-bottom: none;
        }
        .summary-label {
            font-weight: bold;
            color: #856404;
        }
        .summary-value {
            color: #000;
            font-weight: bold;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .info-card {
            background: #e7f3ff;
            border-left: 4px solid #007bff;
            padding: 20px;
            border-radius: 5px;
        }
        .info-card h4 {
            color: #007bff;
            margin-bottom: 10px;
        }
        .info-card ul {
            margin: 0;
            padding-left: 20px;
        }
        .info-card li {
            margin-bottom: 5px;
        }
        .action-buttons {
            text-align: center;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🍗 雞排結帳系統</h1>
            <p>Vercel 靜態部署成功 - 雲端雞排對帳系統</p>
        </div>
        
        <div class="content">
            <div class="status">
                <strong>✅ 系統狀態:</strong> Vercel 靜態部署成功 |
                <strong>🌐 網域:</strong> <span id="current-domain"></span> |
                <strong>⏱️ 時間:</strong> <span id="current-time"></span>
            </div>
            
            <div class="demo-section">
                <h3>🚀 系統功能展示</h3>
                <p>以下是您的雞排結帳系統功能：</p>
                
                <div class="form-group">
                    <label for="start-date">開始日期：</label>
                    <input type="date" id="start-date" value="2025-09-16">
                </div>
                
                <div class="form-group">
                    <label for="end-date">結束日期：</label>
                    <input type="date" id="end-date" value="2025-09-30">
                </div>
                
                <div class="button-group">
                    <button class="btn btn-success" onclick="loadData()">📊 載入炸雞數據</button>
                    <button class="btn btn-primary" onclick="generateReport()">📋 生成對帳報告</button>
                    <button class="btn btn-info" onclick="showDemo()">🎯 查看功能展示</button>
                </div>
            </div>
            
            <!-- 文字對帳摘要 -->
            <div id="result-section" class="result-section">
                <h3>📝 與老闆對帳摘要</h3>
                <div style="background: white; border: 1px solid #ddd; border-radius: 5px; padding: 15px; margin: 10px 0; max-height: 400px; overflow-y: auto;">
                    <pre id="result-content" style="font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.4; white-space: pre-wrap; margin: 0; color: #333;">載入資料後會顯示詳細的對帳摘要</pre>
                </div>
                <button class="btn" onclick="copyTextSummary()" style="background: linear-gradient(135deg, #00b894, #00a085);">📋 複製摘要</button>
            </div>
            
            <div class="info-grid">
                <div class="info-card">
                    <h4>🚀 系統功能</h4>
                    <ul>
                        <li>📊 炸雞銷售數據分析</li>
                        <li>💰 自動對帳計算</li>
                        <li>📋 Excel 報告生成</li>
                        <li>🔗 Google Sheets 整合</li>
                        <li>📱 響應式網頁設計</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h4>🛠️ 技術架構</h4>
                    <ul>
                        <li><strong>前端:</strong> 純 HTML/CSS/JavaScript</li>
                        <li><strong>部署:</strong> Vercel 靜態部署</li>
                        <li><strong>數據源:</strong> Google Sheets</li>
                        <li><strong>網域:</strong> Vercel 免費網域</li>
                        <li><strong>狀態:</strong> 靜態部署成功</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h4>📋 使用流程</h4>
                    <ul>
                        <li>1. 設定日期範圍</li>
                        <li>2. 載入炸雞銷售數據</li>
                        <li>3. 自動計算對帳結果</li>
                        <li>4. 生成 Excel 報告</li>
                        <li>5. 下載並使用報告</li>
                    </ul>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-success" onclick="showFeatures()">🔍 查看功能詳情</button>
            </div>
        </div>
    </div>
    
    <script>
    // 更新時間和網域
    function updateTime() {
        const now = new Date();
        document.getElementById('current-time').textContent = now.toLocaleString('zh-TW');
        document.getElementById('current-domain').textContent = window.location.hostname;
    }
    updateTime();
    setInterval(updateTime, 1000);
    
    // 載入數據
    function loadData() {
        const startDate = document.getElementById('start-date').value;
        const endDate = document.getElementById('end-date').value;
        
        showResultText('正在載入炸雞數據...\\n\\n日期範圍: ' + startDate + ' 到 ' + endDate + '\\n\\n載入中，請稍候...');
        
        // 模擬 API 調用
        setTimeout(() => {
            const mockData = {
                dateRange: startDate + " 到 " + endDate,
                totalSales: 1660,
                totalQuantity: 74,
                categories: [
                    { name: "雞排", quantity: 45, price: 45, total: 2025 },
                    { name: "雞翅", quantity: 12, price: 12, total: 144 },
                    { name: "雞腿", quantity: 8, price: 8, total: 64 },
                    { name: "雞塊", quantity: 9, price: 9, total: 81 }
                ],
                totalRevenue: 820,
                revenueRatio: 0.494,
                profit: 840
            };
            
            showTextSummary(mockData);
        }, 2000);
    }
    
    // 生成文字對帳摘要
    function showTextSummary(data) {
        let summary = '';
        summary += '='.repeat(50) + '\n';
        summary += '🍗 炸雞對帳摘要\n';
        summary += '='.repeat(50) + '\n';
        summary += `對帳期間：${data.dateRange}\n`;
        summary += '\n';
        
        // 每日明細（按日期和品項分組）
        summary += '📅 每日明細：\n';
        summary += '-'.repeat(30) + '\n';
        
        // 模擬每日數據（實際應該從 API 獲取）
        const dailyData = [
            { date: '2025-10-01', items: [
                { name: '雞排', quantity: 15, cost: 30, total: 450 },
                { name: '雞翅', quantity: 4, cost: 8, total: 32 }
            ]},
            { date: '2025-10-05', items: [
                { name: '雞排', quantity: 18, cost: 30, total: 540 },
                { name: '雞腿', quantity: 3, cost: 5, total: 15 }
            ]},
            { date: '2025-10-08', items: [
                { name: '雞排', quantity: 12, cost: 30, total: 360 },
                { name: '雞翅', quantity: 8, cost: 8, total: 64 },
                { name: '雞腿', quantity: 5, cost: 5, total: 25 }
            ]}
        ];
        
        dailyData.forEach((day, index) => {
            if (index > 0) summary += '\n';
            summary += `📅 ${day.date}：\n`;
            day.items.forEach(item => {
                summary += `  ${item.name}：${item.quantity} 份 × ${item.cost} 元（進價） = ${item.total} 元\n`;
            });
        });
        
        summary += '\n';
        
        // 每日總計
        summary += '📊 每日總計（進價）：\n';
        dailyData.forEach(day => {
            const dailyTotal = day.items.reduce((sum, item) => sum + item.total, 0);
            const dailyQuantity = day.items.reduce((sum, item) => sum + item.quantity, 0);
            summary += `${day.date}：總計 ${dailyQuantity} 份，進價 ${dailyTotal} 元\n`;
        });
        
        summary += '\n';
        
        // 品項對帳明細
        summary += '🍗 品項對帳明細：\n';
        summary += '-'.repeat(30) + '\n';
        data.categories.forEach(item => {
            // 使用進價（成本）而不是售價
            const cost = Math.floor(item.price * 0.65); // 假設成本約為售價的65%
            const costTotal = item.quantity * cost;
            summary += `${item.name}：${item.quantity} 份 × ${cost} 元（進價） = ${costTotal} 元\n`;
        });
        
        summary += '\n';
        
        // 計算式
        summary += '🧮 計算式：\n';
        summary += '-'.repeat(30) + '\n';
        summary += `總數量：${data.totalQuantity} 份\n`;
        summary += `應付金額：${data.totalRevenue} 元\n`;
        summary += '\n';
        summary += '金額計算明細：\n';
        data.categories.forEach(item => {
            const cost = Math.floor(item.price * 0.65);
            const costTotal = item.quantity * cost;
            summary += `  ${item.name}：${item.quantity} 份 × ${cost} 元 = ${costTotal} 元\n`;
        });
        
        summary += '\n';
        summary += '='.repeat(50) + '\n';
        summary += `💰 應付金額：${data.totalRevenue} 元\n`;
        summary += '='.repeat(50) + '\n';
        
        document.getElementById('result-section').style.display = 'block';
        document.getElementById('result-content').textContent = summary;
    }
    
    // 生成報告
    function generateReport() {
        const startDate = document.getElementById('start-date').value;
        const endDate = document.getElementById('end-date').value;
        
        showResultText('正在生成對帳報告...\\n\\n報告內容:\\n- 日期範圍分析\\n- 炸雞銷售統計\\n- 對帳結果計算\\n- 利潤分析報告\\n\\n報告生成完成！');
    }
    
    // 顯示功能展示
    function showDemo() {
        const mockData = {
            dateRange: "2025-09-16 到 2025-09-30",
            totalSales: 1660,
            totalQuantity: 74,
            categories: [
                { name: "雞排", quantity: 45, price: 45, total: 2025 },
                { name: "雞翅", quantity: 12, price: 12, total: 144 },
                { name: "雞腿", quantity: 8, price: 8, total: 64 },
                { name: "雞塊", quantity: 9, price: 9, total: 81 }
            ],
            totalRevenue: 820,
            revenueRatio: 0.494,
            profit: 840
        };
        
        showTextSummary(mockData);
    }
    
    // 複製文字摘要
    function copyTextSummary() {
        const textSummary = document.getElementById('result-content').textContent;
        if (textSummary && textSummary !== '載入資料後會顯示詳細的對帳摘要') {
            navigator.clipboard.writeText(textSummary).then(function() {
                alert('📋 對帳摘要已複製到剪貼簿！');
            }).catch(function(err) {
                // 如果 clipboard API 不可用，使用傳統方法
                const textArea = document.createElement('textarea');
                textArea.value = textSummary;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('📋 對帳摘要已複製到剪貼簿！');
            });
        } else {
            alert('❌ 請先載入資料');
        }
    }
    
    // 顯示功能詳情
    function showFeatures() {
        const features = {
            "系統功能詳情": {
                "數據整合": {
                    "Google Sheets 整合": "直接讀取 Google Sheets 數據，無需 API 認證",
                    "數據格式": "自動轉換數據格式，支援多種輸入格式",
                    "數據驗證": "自動驗證數據完整性，確保計算準確性"
                },
                "對帳計算": {
                    "自動對帳": "自動計算炸雞銷售對帳，支援多種產品類型",
                    "利潤分析": "詳細的利潤分析報告，包含各項成本計算",
                    "數據統計": "完整的銷售統計，包含數量、金額、比例分析"
                },
                "報告生成": {
                    "Excel 報告": "自動生成 Excel 格式的對帳報告",
                    "數據匯出": "支援多種格式的數據匯出功能",
                    "報告自訂": "可自訂報告內容和格式"
                }
            }
        };
        
        showResultText('功能詳情:\\n\\n' + JSON.stringify(features, null, 2));
    }
    
    // 顯示文字結果
    function showResultText(content) {
        document.getElementById('result-section').style.display = 'block';
        document.getElementById('result-content').textContent = content;
    }
    </script>
</body>
</html>